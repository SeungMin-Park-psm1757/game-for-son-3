# 게임 기획서: 정우의 낚시 대모험 (가제)

## 1. 게임 개요
* **타겟 연령층**: 8세 전후 (어린이 맞춤형)
* **플랫폼**: 웹 브라우저 (PC 및 모바일 지원, Responsive Design)
* **장르**: 캐주얼 아케이드 / 클릭 & 연타 낚시 게임 + 수집형 도감 요소
* **개발 엔진/기술**: Phaser 3 (HTML5 Canvas), Vanilla JavaScript (ES6 Modules)
* **목적**: 간편한 조작감(터치/클릭, 연타)을 통한 체감형 재미 제공 및, 퀴즈를 통한 간단한 학습 요소 결합.

---

## 2. 코어 게임플레이 루프
게임은 크게 4가지 단계(Phase)로 나누어집니다.

1. **상태 대기 (IDLE)**: 
   - 플레이어가 낚시할 지역(바다/물)을 클릭/터치하여 찌를 투척할 위치를 정합니다.
   
2. **접근 및 대기 (APPROACH / LURE)**: 
   - 찌가 수면에 떨어지고, 보이지 않는 (혹은 배경을 돌아다니는 실루엣) 물고기가 찌를 물 때까지 랜덤한 시간(Catch Chance 스탯에 의해 단축됨)을 대기합니다.
   
3. **입질 (BITE)**: 
   - 물고기가 미끼를 물면 화면에 큰 느낌표(`!`)가 나타나고 찌가 요동치며 소리가 납니다.
   - 플레이어는 아주 짧은 제한 시간(약 1.5초) 내에 클릭하여 챔질을 해야 합니다. 실패 시 처음으로 돌아갑니다.

4. **잡기 (CATCH) - 연타 미니게임**: 
   - 챔질에 성공하면 물고기의 체력(Catch Max)에 해당하는 연타 게이지 미니게임이 시작됩니다.
   - 화면을 마구 연타하여 썰물처럼 빠지는 게이지(Reel Speed 스탯에 의해 방어)를 채워야 합니다(Rod Power 스탯 합산).
   - 게이지를 100% 채우면 낚시에 성공합니다.
   
5. **보상 및 퀴즈 (REWARD)**: 
   - 물고기를 잡으면 화려한 파티클과 함께 도감에 물고기가 등록됩니다.
   - 50% 확률로 간단한 덧셈/뺄셈 퀴즈 팝업이 뜨며, 정답을 맞추면 기본 골드의 10% 추가 보너스가 제공됩니다.

---

## 3. 챕터 (지역) 시스템 및 난이도 진행
게임은 3가지 지역으로 나뉘어 있으며, 특정 목표 골드를 달성하면 다음 지역이 해금됩니다. 각 지역마다 잡히는 어종, 배경, 낚싯줄 투척 위치 범위가 다릅니다.

* **챕터 1: 민물 (수심 얕음)**
  - 배경: `bg_freshwater.png` (초록빛 다소 탁한 물)
  - 투척 가능 범위: 하단 20%
  - 목표 달성 금액: 500 골드
  - 서식 물고기: 피라미(N), 붕어(R), 쏘가리(SR), 마왕 가물치(SSR)

* **챕터 2: 연안 (중간 깊이)**
  - 배경: `bg_coast.png` (일반 바다색)
  - 투척 가능 범위: 하단 40%
  - 목표 달성 금액: 2000 골드
  - 서식 물고기: 망둥어(N), 우럭(R), 광어(SR), 참돔(SSR)

* **챕터 3: 먼 바다 (가장 깊음)**
  - 배경: `bg_sea.png` (깊고 푸른 바다)
  - 투척 가능 범위: 하단 60%
  - 목표 달성 금액: 5000 골드
  - 서식 물고기: 고등어(N), 은빛 갈치(R), 대방어(SR), 청새치(SSR)

**최초 접속 시 스토리 씬 (`StoryScene.js`)**
  - 처음 챕터 1 진입 시(골드가 0일 때), 아빠를 배웅하고 세연이를 위해 낚시로 돈을 벌어야 하는 정우의 동기가 담긴 대화문(스토리 씬)이 1회 재생됩니다.

---

## 4. 물고기 데이터 기획 (`FishData.js`)
물고기는 총 4개의 등급 (N, R, SR, SSR)으로 나뉘며 챕터별로 4종씩 총 12종이 있습니다. 등급이 높을수록 기본 등장 확률이 낮고, 잡기 위한 체력(`catchMax`)과 방해 요소(게이지 하락률)가 큽니다.

| 등급 | 특징 | 기본 보상 |
|---|---|---|
| N (일반) | 출현율 높음 (기본 가중치 60), 체력(60~80), 낮은 게이지 하락률 | 낮음 |
| R (레어) | 출현율 보통 (기본 가중치 25), 체력(100~150), 중간 게이지 하락률 | 보통 |
| SR (슈퍼레어) | 출현율 낮음 (기본 가중치 5), 체력(200~300), 체력 게이지가 빨리 하락 | 높음 |
| SSR (전설) | 출현율 매우 낮음 (가중치 0.5), 체력(400~600), 게이지가 초당 엄청나게 하락하여 연타가 빡셈 | 매우 높음 |

*(최근 유저 패치로 인해 R, SR, SSR 등급의 연타 도중 게이지 하락폭이 크게 증가하여 스탯 업그레이드를 강제하는 디자인이 도입되었습니다.)*

---

## 5. 경제 시스템 (상점 & 스탯 업그레이드)
가장 핵심적인 성장 루프로, 유저는 낚시와 퀴즈로 얻은 골드를 통해 능력을 강화합니다. 스탯별로 최대 레벨이 다르며 요구 비용도 단계별로 상승폭이 다르게 설정되어 있습니다.

| 스탯 대상 | 효과 설명 | 최대 한도(Max Level) | 비용 요구 산식 | 비고 |
|---|---|---|---|---|
| **Rod Power** | 연타 1회당 오르는 게이지 양 증가 | 20 | 100 + (Lv * 50) | 가장 기본이 되는 필수 스탯 |
| **Catch Chance** | 찌 투척 후 입질이 오는 대기 시간 단축 | 10 | 100 + (Lv * 100) | 텐포 최적화 (파밍 속도업) |
| **Reel Speed** | 연타 미니게임 시 초당 깎이는 게이지 방어력 | 10 | 100 + (Lv * 150) | 상위 등급 물고기 포획 안정성 |
| **Rod Luck** | SSR, SR 등 희귀 물고기가 걸릴 가중치 상승 | 5 | 100 + (Lv * 300) | 가장 비쌈, 대박 수익용 |

*(최대 레벨 도달 시 상점 내 버튼이 회색의 'MAX' 텍스트와 함께 비활성화됩니다.)*

---

## 6. 시각 연출 및 UI 디자인
* **탑다운 시점 (Top-Down View)**: 
  - 화면 하단 10~15% 위치에 나무 데크와 낚시꾼(`character.png`) 도트 스프라이트가 존재.
  - 플레이어가 바다 영역을 클릭하면 캐릭터의 낚싯대 위치에서 찌(`lure.png`)까지 실시간 낚싯줄 선(`Graphics` 객체)이 렌더링되며 던지는 물리적 감각을 줌.
  
* **물고기 실루엣 (`createWanderingFishes`)**:
  - `GameScene`에서는 찌가 물기를 기다리는 동안 배경 바로 위에 반투명한 물고기 실루엣들(현재 지역의 어종들 기반)이 랜덤 속도로 좌우를 헤엄치며 그래픽적 생동감을 부여함.

* **팝업 기능 (DOM 기반 UI)**
  - 상점(`UIManager.js`): NPC 대사가 랜덤하게 나오는 상점 패널.
  - 도감(`Encyclopedia`): 플레이어가 획득해 본 적치와 함께 픽셀 아트 모델을 실루엣/컬러링으로 구분.
  - 수학 퀴즈 팝업: 정우(8세) 연령대에 맞는 난이도의 계산(한 자릿수/두 자릿수 덧셈뺄셈)을 정답, 오답 버튼 형식의 팝업으로 제공.

---

## 7. 상태 및 데이터 저장 관리 (`PlayerModel.js`)
- 플레이어의 현재 골드, 4가지 스탯, 물고기 포획 수량 딕셔너리(`fishCollection`), 현재 챕터(`currentChapter`), 해금된 최대 챕터(`highestChapter`), 스토리 시청 여부 등을 Observer 패턴 기반으로 관리합니다.
- 변경 사항이 생길 때마다 HTML5 `localStorage`를 통해 브라우저 캐시에 즉시 자동 저장됩니다. 따라서 새로고침하더라도 하던 정보가 보존됩니다.
