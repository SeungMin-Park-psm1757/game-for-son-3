<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ì •ìš°ì˜ ë‚šì‹œ ê²Œì„</title>
    <link rel="stylesheet" href="styles/main.css">
    <!-- Phaser 3 script from CDN -->
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.80.1/dist/phaser.min.js"></script>
</head>

<body>
    <!-- ì¹˜íŠ¸í‚¤: ?cheat URL íŒŒë¼ë¯¸í„°ë¡œ ëª¨ë“  ì§€ì—­ í•´ê¸ˆ (Phaser ë¡œë“œ ì „ ì‹¤í–‰) -->
    <script>
        if (new URLSearchParams(window.location.search).has('cheat')) {
            let data = {};
            try {
                const r = localStorage.getItem('fishingGameData');
                if (r) data = JSON.parse(r);
            } catch (e) { }

            // í•„ìˆ˜ í•„ë“œ ë³´ì • (ë°ì´í„° ëˆ„ë½ìœ¼ë¡œ ì¸í•œ í¬ë˜ì‹œ ë°©ì§€)
            if (!data.stats) {
                data.stats = { rodPower: 1, catchChance: 1, reelSpeed: 1, rodLuck: 1 };
            }
            if (!data.fishCollection) data.fishCollection = {};
            if (!data.hasSeenMidChapterEvent) data.hasSeenMidChapterEvent = {};
            if (!data.fishMilestonesSeen) data.fishMilestonesSeen = {};

            data.highestChapter = 4;
            data.currentChapter = 4;
            data.gold = (data.gold || 0) + 10000;
            localStorage.setItem('fishingGameData', JSON.stringify(data));
            alert('ì¹˜íŠ¸í‚¤ í™œì„±í™”!\nëª¨ë“  ì§€ì—­ í•´ê¸ˆ + 1ë§Œ ê³¨ë“œ ì§€ê¸‰!');

            // ê¹¨ë—í•œ URLë¡œ ì´ë™ (íŒŒë¼ë¯¸í„° ì œê±°)
            window.location.href = window.location.origin + window.location.pathname;
        }
    </script>
    <div id="game-container"></div>

    <!-- UI Overlay (Canvas ìœ„ìª½ì— ìœ„ì¹˜) -->
    <div id="ui-layer">
        <!-- ì¶”í›„ ìƒì , í€´ì¦ˆ, ì¸ë²¤í† ë¦¬ ë“±ì˜ DOM ìš”ì†Œê°€ ì¶”ê°€ë  ì˜ì—­ -->
    </div>

    <!-- ëª¨ë°”ì¼ ì„¸ë¡œ ëª¨ë“œ ê²½ê³ ì°½ -->
    <div id="orientation-warning">
        <div style="font-size: 50px; margin-bottom: 20px;">ğŸ”„</div>
        ê°€ë¡œ í™”ë©´ìœ¼ë¡œ ëŒë ¤ì„œ<br>í”Œë ˆì´í•´ ì£¼ì„¸ìš”!
    </div>

    <div id="debug-overlay"
        style="position:fixed;top:0;left:0;width:100%;background:rgba(255,0,0,0.8);color:white;z-index:9999;pointer-events:none;padding:10px;font-size:12px;display:none;word-wrap:break-word;max-height:50vh;overflow-y:auto;">
    </div>
    <script>
        window.onerror = function (msg, url, lineNo, columnNo, error) {
            var debugDiv = document.getElementById('debug-overlay');
            if (debugDiv) {
                debugDiv.style.display = 'block';
                debugDiv.innerHTML += '<p>Error: ' + msg + '<br>Line: ' + lineNo + ':' + columnNo + '<br>File: ' + url + '</p>';
            }
            return false;
        };
        window.addEventListener("unhandledrejection", function (event) {
            var debugDiv = document.getElementById('debug-overlay');
            if (debugDiv) {
                debugDiv.style.display = 'block';
                debugDiv.innerHTML += '<p>Unhandled Promise Rejection: ' + event.reason + '</p>';
            }
        });
    </script>
    <!-- ES6 Module Entry -->
    <script type="module" src="src/main.js?v=20260228j"></script>
</body>

</html>